{{ define "main" }}
<main class="container mx-auto my-10">
  <h1 class="text-3xl md:text-4xl font-bold mb-8 text-center">Galerie</h1>

  <!-- Lightbox2 CSS + JS -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/css/lightbox.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.4/js/lightbox.min.js"></script>

  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
    {{ $files := readDir "static/gallery" }}
    {{ range $files }}
      {{ $ext := lower (path.Ext .Name) }}
      {{ if in (slice ".jpg" ".jpeg" ".png" ".gif" ".webp") $ext }}

        {{/* caption lookup: data/gallery.toml maps filename -> caption */}}
        {{ $caption := index site.Data.gallery .Name | default .Name }}

        <div class="overflow-hidden rounded-xl shadow-md">
          <a href="{{ printf "/gallery/%s" .Name }}" data-lightbox="reisegalerie" data-title="{{ $caption }}">
            <img src="{{ printf "/gallery/%s" .Name }}" alt="{{ $caption }}" class="w-full h-auto hover:scale-105 transition duration-300">
          </a>

          {{/* optional: show caption under thumbnail too */}}
          <div class="p-2 text-sm text-center text-gray-600">
            {{ $caption }}
          </div>
        </div>
      {{ end }}
    {{ end }}
  </div>
</main>
{{ end }}